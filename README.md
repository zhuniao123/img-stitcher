# 图片拼接工具

一个简单易用的图片拼接工具，支持将多张图片按照网格布局进行拼接，同时提供批量处理功能。

## 功能特性

### 网格拼接
- 🎯 **灵活布局**: 支持 1×2、2×2、3×3 预设布局，或自定义任意行列
- 🖼️ **多种填充模式**: 等比缩放、裁剪铺满、拉伸铺满、平铺
- ⚙️ **丰富设置**: 可调节间距、显示网格线、选择单元格大小模式
- 🎨 **高质量渲染**: 使用 Canvas 2D 高质量插值算法
- 💾 **多格式导出**: 支持 PNG 无损和 JPEG 可调质量导出

### 批量处理
- 🔄 **智能匹配**: 按文件名规则自动匹配图片（如 test0 与 test1）
- 📏 **统一尺寸**: 自动缩放到指定尺寸后拼接
- ⚡ **高效处理**: 支持批量处理大量图片
- 📁 **灵活保存**: 支持目录保存或批量下载

### 跨平台支持
- 🌐 **纯前端**: 无需安装，在浏览器中直接使用
- 🔒 **隐私安全**: 所有处理在本地完成，图片不上传
- 📱 **响应式**: 支持桌面和移动设备
- 🐳 **容器化**: 提供 Docker 部署支持

## 快速开始

### 本地使用
1. 直接在浏览器中打开 `index.html`
2. 推荐使用 Chrome 或 Edge 以获得完整功能

### Docker 部署
```bash
# 构建镜像
docker build -t img-stitcher .

# 运行容器
docker run -p 8080:80 img-stitcher
```

或使用 docker-compose：
```bash
docker-compose up -d
```

然后访问 `http://localhost:8080`

## 使用方法

### 网格拼接
1. **选择布局**: 点击预设布局按钮或输入自定义行列数
2. **设置参数**: 
   - 单元格大小：固定大小或根据内容自动膨胀
   - 填充模式：选择图片如何适配单元格
   - 间距：调节图片之间的间距
   - 网格线：选择是否显示分割线
3. **添加图片**: 
   - 拖拽图片到网格中
   - 或点击网格单元格选择图片
4. **导出**: 选择格式和质量，点击导出按钮

### 批量处理
1. **选择图片**: 
   - 点击"选择文件"选择多个图片
   - 或点击"选择文件夹"（Chrome/Edge 支持）
2. **设置规则**: 
   - 输入匹配模式，如 `test{n}` 会匹配 test0、test1 等
   - 选择拼接方向（水平或垂直）
3. **设置尺寸**: 输入目标宽度和高度
4. **开始处理**: 点击开始按钮，工具会自动匹配并处理

## 浏览器兼容性

| 功能 | Chrome/Edge | Firefox | Safari |
|------|-------------|---------|--------|
| 基本拼接 | ✅ | ✅ | ✅ |
| 目录保存 | ✅ | ❌ | ❌ |
| 文件夹选择 | ✅ | ❌ | ❌ |
| 高质量渲染 | ✅ | ✅ | ✅ |

> **注意**: Firefox 和 Safari 用户将使用浏览器下载代替目录保存功能

## 技术特性

- **零依赖**: 使用原生 JavaScript，无第三方库
- **高性能**: createImageBitmap + Canvas 2D 高质量渲染
- **内存优化**: 并发限流和智能内存管理
- **渐进增强**: 基于浏览器能力自动降级

## 限制说明

- **画布尺寸**: 单边最大 16000 像素（受浏览器限制）
- **文件大小**: 建议单个图片不超过 50MB
- **并发处理**: 同时处理图片数量有限制以保证性能

## 常见问题

### Q: 为什么导出的图片质量降低了？
A: 请检查导出格式设置。PNG 是无损格式，JPEG 可调节质量滑块。

### Q: 批量处理没有找到匹配的图片？
A: 请检查文件命名是否符合规则。例如 `test{n}` 需要文件名为 test0.jpg、test1.jpg 这样的格式。

### Q: 无法保存到指定目录？
A: 目录保存功能仅在 Chrome/Edge 中可用。其他浏览器会自动使用下载功能。

### Q: 图片显示不完整或变形？
A: 请尝试不同的填充模式：
- 等比缩放（contain）：完整显示图片，可能留白
- 裁剪铺满（cover）：保持比例铺满单元格，边缘会被裁剪
- 拉伸铺满（stretch）：不保持比例，拉伸以铺满单元格
- 平铺（tile）：按原尺寸重复平铺填满

## 项目结构
```